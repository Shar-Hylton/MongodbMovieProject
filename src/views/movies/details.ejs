<%- include('../partials/header') %>

<div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 shadow-md rounded overflow-hidden">

  <% if (movie.posterUrl) { %>
    <img src="<%= movie.posterUrl %>" alt="<%= movie.name %>" class="w-full h-96 object-cover">
  <% } else { %>
    <div class="w-full h-96 bg-gray-200 flex items-center justify-center text-gray-400">
      <i class="fa-solid fa-film fa-3x"></i>
    </div>
  <% } %>

  <div class="p-6">
    <h2 class="text-3xl font-extrabold mb-2 text-gray-900 dark:text-white"><%= movie.name %></h2>
    <p class="text-gray-700 mb-4 dark:text-gray-200"><%= movie.description %></p>
    <p class="text-gray-500 mb-1 dark:text-gray-300">Year: <%= movie.year || 'N/A' %></p>
    <p class="text-gray-500 mb-1 dark:text-gray-300">Rating: <%= movie.rating %></p>
    <p class="text-gray-500 mb-4 dark:text-gray-300">Genres: <%= movie.genres.join(', ') %></p>
    <p class="text-xs text-gray-400 mb-4 dark:text-gray-400">Added by: <%= movie.owner?.username || 'Unknown' %></p>

    <div class="flex space-x-2">
      <a href="/movies" class="btn-secondary bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-500 px-4 py-2 rounded transition-colors"><i class="fa-solid fa-arrow-left mr-1"></i>Back</a>

      <% if (session?.user && movie.owner?._id.toString() === session.user._id) { %>
        <a href="/movies/edit/<%= movie._id %>" class="btn-primary bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-800 px-4 py-2 rounded transition-colors"><i class="fa-solid fa-pen-to-square mr-1"></i>Edit</a>
        <form action="/movies/delete/<%= movie._id %>" method="POST" onsubmit="return confirm('Are you sure?');">
          <button type="submit" class="btn-error bg-red-600 dark:bg-red-700 text-white hover:bg-red-700 dark:hover:bg-red-800 px-4 py-2 rounded transition-colors"><i class="fa-solid fa-trash mr-1"></i>Delete</button>
        </form>
      <% } %>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
